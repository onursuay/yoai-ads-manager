import type { 
  MetaCampaign, 
  MetaAdSet, 
  MetaAd, 
  MetaRecommendation,
  DashboardMetrics 
} from '@/types/meta-ads';

// Mock Campaigns
export const mockCampaigns: MetaCampaign[] = [
  {
    id: 'camp_001',
    name: 'Sonbahar İndirim Kampanyası',
    status: 'ACTIVE',
    objective: 'CONVERSIONS',
    daily_budget: 500,
    created_time: '2024-10-15T10:00:00Z',
    updated_time: '2024-11-28T14:30:00Z',
    insights: {
      spend: 4250.50,
      impressions: 485000,
      clicks: 12450,
      ctr: 2.57,
      cpc: 0.34,
      cpm: 8.76,
      reach: 320000,
      frequency: 1.52,
      conversions: 845,
      conversion_value: 13520,
      roas: 3.18,
      date_start: '2024-10-15',
      date_stop: '2024-11-28',
    },
  },
  {
    id: 'camp_002',
    name: 'Yeni Ürün Lansmanı',
    status: 'ACTIVE',
    objective: 'BRAND_AWARENESS',
    daily_budget: 750,
    created_time: '2024-11-01T08:00:00Z',
    updated_time: '2024-11-28T16:00:00Z',
    insights: {
      spend: 5875.25,
      impressions: 892000,
      clicks: 15680,
      ctr: 1.76,
      cpc: 0.37,
      cpm: 6.59,
      reach: 580000,
      frequency: 1.54,
      conversions: 420,
      conversion_value: 8400,
      roas: 1.43,
      date_start: '2024-11-01',
      date_stop: '2024-11-28',
    },
  },
  {
    id: 'camp_003',
    name: 'Retargeting - Sepet Terk',
    status: 'ACTIVE',
    objective: 'CONVERSIONS',
    daily_budget: 300,
    created_time: '2024-09-20T12:00:00Z',
    updated_time: '2024-11-28T15:45:00Z',
    insights: {
      spend: 2340.80,
      impressions: 156000,
      clicks: 8920,
      ctr: 5.72,
      cpc: 0.26,
      cpm: 15.01,
      reach: 45000,
      frequency: 3.47,
      conversions: 1250,
      conversion_value: 31250,
      roas: 13.35,
      date_start: '2024-09-20',
      date_stop: '2024-11-28',
    },
  },
  {
    id: 'camp_004',
    name: 'Kış Koleksiyonu Teaser',
    status: 'PAUSED',
    objective: 'REACH',
    daily_budget: 200,
    created_time: '2024-11-20T09:00:00Z',
    updated_time: '2024-11-25T11:00:00Z',
    insights: {
      spend: 450.00,
      impressions: 125000,
      clicks: 2100,
      ctr: 1.68,
      cpc: 0.21,
      cpm: 3.60,
      reach: 98000,
      frequency: 1.28,
      conversions: 85,
      conversion_value: 1275,
      roas: 2.83,
      date_start: '2024-11-20',
      date_stop: '2024-11-25',
    },
  },
];

// Mock AdSets
export const mockAdSets: MetaAdSet[] = [
  // Campaign 1 AdSets
  {
    id: 'adset_001',
    campaign_id: 'camp_001',
    name: 'Kadın 25-44 İstanbul',
    status: 'ACTIVE',
    daily_budget: 200,
    optimization_goal: 'CONVERSIONS',
    billing_event: 'IMPRESSIONS',
    created_time: '2024-10-15T10:30:00Z',
    targeting: {
      age_min: 25,
      age_max: 44,
      genders: [2],
      geo_locations: {
        cities: [{ key: 'istanbul', name: 'İstanbul' }],
      },
      interests: [
        { id: 'int_001', name: 'Moda' },
        { id: 'int_002', name: 'Online Alışveriş' },
      ],
    },
    insights: {
      spend: 1800.25,
      impressions: 210000,
      clicks: 5400,
      ctr: 2.57,
      cpc: 0.33,
      cpm: 8.57,
      reach: 145000,
      frequency: 1.45,
      conversions: 380,
      conversion_value: 6080,
      roas: 3.38,
      date_start: '2024-10-15',
      date_stop: '2024-11-28',
    },
  },
  {
    id: 'adset_002',
    campaign_id: 'camp_001',
    name: 'Erkek 30-55 Ankara',
    status: 'ACTIVE',
    daily_budget: 150,
    optimization_goal: 'CONVERSIONS',
    billing_event: 'IMPRESSIONS',
    created_time: '2024-10-15T10:45:00Z',
    targeting: {
      age_min: 30,
      age_max: 55,
      genders: [1],
      geo_locations: {
        cities: [{ key: 'ankara', name: 'Ankara' }],
      },
    },
    insights: {
      spend: 1250.00,
      impressions: 140000,
      clicks: 3800,
      ctr: 2.71,
      cpc: 0.33,
      cpm: 8.93,
      reach: 95000,
      frequency: 1.47,
      conversions: 245,
      conversion_value: 3920,
      roas: 3.14,
      date_start: '2024-10-15',
      date_stop: '2024-11-28',
    },
  },
  {
    id: 'adset_003',
    campaign_id: 'camp_001',
    name: 'Lookalike - Müşteriler',
    status: 'PAUSED',
    daily_budget: 150,
    optimization_goal: 'CONVERSIONS',
    billing_event: 'IMPRESSIONS',
    created_time: '2024-10-20T14:00:00Z',
    targeting: {
      age_min: 18,
      age_max: 65,
      custom_audiences: [{ id: 'lal_001', name: 'LAL 1% Müşteriler' }],
    },
    insights: {
      spend: 1200.25,
      impressions: 135000,
      clicks: 3250,
      ctr: 2.41,
      cpc: 0.37,
      cpm: 8.89,
      reach: 80000,
      frequency: 1.69,
      conversions: 220,
      conversion_value: 3520,
      roas: 2.93,
      date_start: '2024-10-20',
      date_stop: '2024-11-28',
    },
  },
  // Campaign 2 AdSets
  {
    id: 'adset_004',
    campaign_id: 'camp_002',
    name: 'Geniş Kitle - Türkiye',
    status: 'ACTIVE',
    daily_budget: 400,
    optimization_goal: 'REACH',
    billing_event: 'IMPRESSIONS',
    created_time: '2024-11-01T08:30:00Z',
    targeting: {
      age_min: 18,
      age_max: 65,
      geo_locations: {
        countries: ['TR'],
      },
    },
    insights: {
      spend: 3500.00,
      impressions: 620000,
      clicks: 9800,
      ctr: 1.58,
      cpc: 0.36,
      cpm: 5.65,
      reach: 420000,
      frequency: 1.48,
      conversions: 280,
      conversion_value: 5600,
      roas: 1.60,
      date_start: '2024-11-01',
      date_stop: '2024-11-28',
    },
  },
  {
    id: 'adset_005',
    campaign_id: 'camp_002',
    name: 'Ilgi Alanı - Teknoloji',
    status: 'ACTIVE',
    daily_budget: 350,
    optimization_goal: 'REACH',
    billing_event: 'IMPRESSIONS',
    created_time: '2024-11-01T09:00:00Z',
    targeting: {
      age_min: 22,
      age_max: 45,
      interests: [
        { id: 'int_003', name: 'Teknoloji' },
        { id: 'int_004', name: 'Gadget\'lar' },
      ],
    },
    insights: {
      spend: 2375.25,
      impressions: 272000,
      clicks: 5880,
      ctr: 2.16,
      cpc: 0.40,
      cpm: 8.73,
      reach: 160000,
      frequency: 1.70,
      conversions: 140,
      conversion_value: 2800,
      roas: 1.18,
      date_start: '2024-11-01',
      date_stop: '2024-11-28',
    },
  },
  // Campaign 3 AdSets
  {
    id: 'adset_006',
    campaign_id: 'camp_003',
    name: 'Sepet Terk - 7 Gün',
    status: 'ACTIVE',
    daily_budget: 200,
    optimization_goal: 'CONVERSIONS',
    billing_event: 'IMPRESSIONS',
    created_time: '2024-09-20T12:30:00Z',
    targeting: {
      custom_audiences: [{ id: 'ca_001', name: 'Sepet Terk - Son 7 Gün' }],
    },
    insights: {
      spend: 1560.50,
      impressions: 98000,
      clicks: 6200,
      ctr: 6.33,
      cpc: 0.25,
      cpm: 15.92,
      reach: 28000,
      frequency: 3.50,
      conversions: 850,
      conversion_value: 21250,
      roas: 13.62,
      date_start: '2024-09-20',
      date_stop: '2024-11-28',
    },
  },
  {
    id: 'adset_007',
    campaign_id: 'camp_003',
    name: 'Sepet Terk - 30 Gün',
    status: 'ACTIVE',
    daily_budget: 100,
    optimization_goal: 'CONVERSIONS',
    billing_event: 'IMPRESSIONS',
    created_time: '2024-09-20T13:00:00Z',
    targeting: {
      custom_audiences: [{ id: 'ca_002', name: 'Sepet Terk - 8-30 Gün' }],
    },
    insights: {
      spend: 780.30,
      impressions: 58000,
      clicks: 2720,
      ctr: 4.69,
      cpc: 0.29,
      cpm: 13.45,
      reach: 17000,
      frequency: 3.41,
      conversions: 400,
      conversion_value: 10000,
      roas: 12.82,
      date_start: '2024-09-20',
      date_stop: '2024-11-28',
    },
  },
];

// Mock Ads
export const mockAds: MetaAd[] = [
  // AdSet 1 Ads
  {
    id: 'ad_001',
    adset_id: 'adset_001',
    name: 'Sonbahar Görsel 1 - Carousel',
    status: 'ACTIVE',
    created_time: '2024-10-15T11:00:00Z',
    creative: {
      id: 'cr_001',
      name: 'Sonbahar Carousel',
      title: '%50\'ye varan indirimler!',
      body: 'Sonbahar koleksiyonunda kaçırılmayacak fırsatlar sizi bekliyor.',
      image_url: 'https://picsum.photos/400/400',
      call_to_action_type: 'SHOP_NOW',
      link_url: 'https://example.com/sonbahar',
    },
    insights: {
      spend: 920.50,
      impressions: 108000,
      clicks: 2850,
      ctr: 2.64,
      cpc: 0.32,
      cpm: 8.52,
      reach: 75000,
      frequency: 1.44,
      conversions: 195,
      conversion_value: 3120,
      roas: 3.39,
      date_start: '2024-10-15',
      date_stop: '2024-11-28',
    },
  },
  {
    id: 'ad_002',
    adset_id: 'adset_001',
    name: 'Sonbahar Video - 15sn',
    status: 'ACTIVE',
    created_time: '2024-10-16T09:00:00Z',
    creative: {
      id: 'cr_002',
      name: 'Sonbahar Video',
      title: 'Yeni Sezon Başladı!',
      body: 'Trendleri keşfet, tarzını yarat.',
      video_url: 'https://example.com/video.mp4',
      thumbnail_url: 'https://picsum.photos/400/400',
      call_to_action_type: 'LEARN_MORE',
      link_url: 'https://example.com/yeni-sezon',
    },
    insights: {
      spend: 879.75,
      impressions: 102000,
      clicks: 2550,
      ctr: 2.50,
      cpc: 0.34,
      cpm: 8.63,
      reach: 70000,
      frequency: 1.46,
      conversions: 185,
      conversion_value: 2960,
      roas: 3.36,
      video_views: 45000,
      video_p25_watched: 38000,
      video_p50_watched: 28000,
      video_p75_watched: 18000,
      video_p100_watched: 12000,
      date_start: '2024-10-16',
      date_stop: '2024-11-28',
    },
  },
  // AdSet 6 Ads (Retargeting)
  {
    id: 'ad_003',
    adset_id: 'adset_006',
    name: 'Sepet Hatırlatma - Dinamik',
    status: 'ACTIVE',
    created_time: '2024-09-20T14:00:00Z',
    creative: {
      id: 'cr_003',
      name: 'Dinamik Ürün Reklamı',
      title: 'Sepetinizde ürünler bekliyor!',
      body: 'Ödeme yapmayı mı unuttunuz? Hemen tamamlayın.',
      call_to_action_type: 'SHOP_NOW',
    },
    insights: {
      spend: 1020.30,
      impressions: 62000,
      clicks: 4100,
      ctr: 6.61,
      cpc: 0.25,
      cpm: 16.46,
      reach: 18000,
      frequency: 3.44,
      conversions: 580,
      conversion_value: 14500,
      roas: 14.21,
      date_start: '2024-09-20',
      date_stop: '2024-11-28',
    },
  },
  {
    id: 'ad_004',
    adset_id: 'adset_006',
    name: 'Sepet - %10 İndirim Kodu',
    status: 'PAUSED',
    created_time: '2024-10-01T10:00:00Z',
    creative: {
      id: 'cr_004',
      name: 'İndirim Kodu Görsel',
      title: 'Özel %10 indirim sadece size!',
      body: 'SEPET10 kodunu kullanın, sepetinizi %10 indirimli tamamlayın.',
      image_url: 'https://picsum.photos/400/400',
      call_to_action_type: 'GET_OFFER',
      link_url: 'https://example.com/sepet?code=SEPET10',
    },
    insights: {
      spend: 540.20,
      impressions: 36000,
      clicks: 2100,
      ctr: 5.83,
      cpc: 0.26,
      cpm: 15.01,
      reach: 10000,
      frequency: 3.60,
      conversions: 270,
      conversion_value: 6750,
      roas: 12.49,
      date_start: '2024-10-01',
      date_stop: '2024-11-28',
    },
  },
];

// Mock Recommendations
export const mockRecommendations: MetaRecommendation[] = [
  {
    id: 'rec_001',
    recommendation_type: 'CREATIVE_FATIGUE',
    title: 'Görsel Yorgunluğu Tespit Edildi',
    description: '"Sonbahar Görsel 1 - Carousel" reklamının görselleri yoruldu. Son 7 günde %45 performans düşüşü gözlemlendi. Yeni görseller ile değiştirmenizi öneriyoruz.',
    impact: {
      metric: 'CTR',
      current_value: 2.64,
      projected_value: 3.85,
      change_percentage: 45.8,
    },
    priority: 'HIGH',
    entity_type: 'AD',
    entity_id: 'ad_001',
    entity_name: 'Sonbahar Görsel 1 - Carousel',
    suggested_action: {
      action_type: 'UPDATE_CREATIVE',
      details: {
        reason: 'Frequency > 3.0, CTR düşüşü %45',
        suggestion: 'Yeni görsel seti yükleyin veya mevcut görselleri güncelleyin',
      },
    },
    applied: false,
    dismissed: false,
    created_time: '2024-11-28T10:00:00Z',
    expires_at: '2024-12-05T10:00:00Z',
  },
  {
    id: 'rec_002',
    recommendation_type: 'BUDGET_INCREASE',
    title: 'Bütçe Artırma Önerisi',
    description: '"Retargeting - Sepet Terk" kampanyası çok iyi performans gösteriyor (ROAS: 13.35x). Günlük bütçeyi %30 artırarak daha fazla dönüşüm elde edebilirsiniz.',
    impact: {
      metric: 'Conversions',
      current_value: 1250,
      projected_value: 1625,
      change_percentage: 30,
    },
    priority: 'HIGH',
    entity_type: 'CAMPAIGN',
    entity_id: 'camp_003',
    entity_name: 'Retargeting - Sepet Terk',
    suggested_action: {
      action_type: 'UPDATE_BUDGET',
      field: 'daily_budget',
      current_value: 300,
      suggested_value: 390,
    },
    applied: false,
    dismissed: false,
    created_time: '2024-11-28T09:00:00Z',
    expires_at: '2024-12-05T09:00:00Z',
  },
  {
    id: 'rec_003',
    recommendation_type: 'AUDIENCE_EXPANSION',
    title: 'Hedef Kitle Genişletme',
    description: '"Kadın 25-44 İstanbul" ad set\'i iyi performans gösteriyor. Benzer demografik özelliklere sahip Bursa ve İzmir\'i de hedefleyerek erişiminizi artırabilirsiniz.',
    impact: {
      metric: 'Reach',
      current_value: 145000,
      projected_value: 280000,
      change_percentage: 93,
    },
    priority: 'MEDIUM',
    entity_type: 'ADSET',
    entity_id: 'adset_001',
    entity_name: 'Kadın 25-44 İstanbul',
    suggested_action: {
      action_type: 'UPDATE_TARGETING',
      field: 'geo_locations',
      current_value: { cities: ['istanbul'] },
      suggested_value: { cities: ['istanbul', 'izmir', 'bursa'] },
    },
    applied: false,
    dismissed: false,
    created_time: '2024-11-27T14:00:00Z',
  },
  {
    id: 'rec_004',
    recommendation_type: 'BUDGET_DECREASE',
    title: 'Bütçe Optimize Etme',
    description: '"Yeni Ürün Lansmanı" kampanyasının ROAS\'ı düşük (1.43x). Bütçeyi %20 azaltıp daha iyi performans gösteren kampanyalara yönlendirmenizi öneriyoruz.',
    impact: {
      metric: 'ROAS',
      current_value: 1.43,
      projected_value: 1.78,
      change_percentage: 24.5,
    },
    priority: 'MEDIUM',
    entity_type: 'CAMPAIGN',
    entity_id: 'camp_002',
    entity_name: 'Yeni Ürün Lansmanı',
    suggested_action: {
      action_type: 'UPDATE_BUDGET',
      field: 'daily_budget',
      current_value: 750,
      suggested_value: 600,
    },
    applied: false,
    dismissed: false,
    created_time: '2024-11-28T08:00:00Z',
  },
  {
    id: 'rec_005',
    recommendation_type: 'CREATIVE_FATIGUE',
    title: 'Video Performans Uyarısı',
    description: '"Sonbahar Video - 15sn" reklamının video tamamlama oranı düşüyor. İzleyiciler videoyu tamamlamıyor. Daha kısa veya farklı bir video denemenizi öneriyoruz.',
    impact: {
      metric: 'Video Completion Rate',
      current_value: 26.7,
      projected_value: 45.0,
      change_percentage: 68.5,
    },
    priority: 'LOW',
    entity_type: 'AD',
    entity_id: 'ad_002',
    entity_name: 'Sonbahar Video - 15sn',
    suggested_action: {
      action_type: 'UPDATE_CREATIVE',
      details: {
        reason: 'Video tamamlama oranı %26.7',
        suggestion: '6-10 saniyelik daha kısa bir versiyon deneyin',
      },
    },
    applied: false,
    dismissed: false,
    created_time: '2024-11-26T16:00:00Z',
  },
];

// Mock Dashboard Metrics
export const mockMetrics: DashboardMetrics = {
  totalSpend: 12916.55,
  totalImpressions: 1658000,
  totalClicks: 39150,
  totalConversions: 2600,
  averageCTR: 2.36,
  averageCPC: 0.33,
  averageROAS: 4.19,
  spendChange: 12.5,
  impressionsChange: 18.3,
  clicksChange: 15.7,
  conversionsChange: 22.4,
};

// Helper: Get AdSets for a Campaign
export function getAdSetsForCampaign(campaignId: string): MetaAdSet[] {
  return mockAdSets.filter((adset) => adset.campaign_id === campaignId);
}

// Helper: Get Ads for an AdSet
export function getAdsForAdSet(adsetId: string): MetaAd[] {
  return mockAds.filter((ad) => ad.adset_id === adsetId);
}

// Helper: Get Recommendations for an Entity
export function getRecommendationsForEntity(
  entityType: 'CAMPAIGN' | 'ADSET' | 'AD',
  entityId: string
): MetaRecommendation[] {
  return mockRecommendations.filter(
    (rec) => rec.entity_type === entityType && rec.entity_id === entityId
  );
}

// Helper: Build Campaign Tree with AdSets and Ads
export function buildCampaignTree(): (MetaCampaign & { adsets: (MetaAdSet & { ads: MetaAd[] })[] })[] {
  return mockCampaigns.map((campaign) => ({
    ...campaign,
    adsets: getAdSetsForCampaign(campaign.id).map((adset) => ({
      ...adset,
      ads: getAdsForAdSet(adset.id),
    })),
  }));
}
